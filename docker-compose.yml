version: '3.9'
services:
    web-development:
        container_name: development
        build:
            dockerfile: Dockerfile 
            context: .
            target: development
        ports:
            - 5000:5000
        volumes:
            - type: bind
              source: ./app
              target: /app/app
        environment: 
            FLASK_DEBUG: 1

    web-production:
        container_name: production
        build: 
            dockerfile: Dockerfile
            context: .
            target: production
        ports:
            - 80:80
        volumes:
            - type: bind
              source: ./app
              target: /app/app